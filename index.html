<!DOCTYPE html>
<html>
<head>
	<title>Jogo da velha</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
		}
		body{
			display: flex;
			justify-content: center;
		}
		#tabuleiro tr td{
			height: 100px;
			width: 100px;
			text-align: center;
		}
	</style>
</head>
<body>

	<div id="tabuleiro">
		<table border="1">
			<tr>
				<td id="1" onclick="jogada(1)">1 </td>
				<td id="2" onclick="jogada(2)">2 </td>
				<td id="3" onclick="jogada(3)">3 </td>
			</tr>
			<tr>
				<td id="4" onclick="jogada(4)">4 </td>
				<td id="5" onclick="jogada(5)">5 </td>
				<td id="6" onclick="jogada(6)">6 </td>
			</tr>
			<tr>
				<td id="7" onclick="jogada(7)">7 </td>
				<td id="8" onclick="jogada(8)">8 </td>
				<td id="9" onclick="jogada(9)">9 </td>
			</tr>
		</table>
	</div>

</body>

<script>

	const game = {
		currentPlayer: 1,
		availbleField: [1,2,3,4,5,6,7,8,9],
		player1: [],
		player2: [],
		try: []

	}

	console.log(game.trys)


	const wins = {
		win1: [1,2,3],
		win2: [4,5,6],
		win3: [7,8,9],
		win4: [1,4,7],
		win5: [2,5,8],
		win6: [3,6,9],
		win7: [3,5,7],
		win8: [1,5,9]
	}

	 function jogada(casa){

	 	console.log(casa)
	 	var campo = document.getElementById(casa);
	 	var didAt = game.availbleField.indexOf(casa)

	 	if (game.currentPlayer == 1) {
		 	if (didAt > -1) {
		 		game.availbleField.splice(didAt, 1);
		 		console.log(game.availbleField)
		 		campo.innerHTML = 'X'
		 		game.currentPlayer = 2;
		 		game.player1.push(casa)
		 		won('player1')


		 	}
		 }else{
		 	if (didAt > -1) {
		 		game.availbleField.splice(didAt, 1);
		 		console.log(game.availbleField)
		 		campo.innerHTML = 'O'
		 		game.currentPlayer = 1;
		 		game.player2.push(casa)
		 		won('player2')


		 	}
		 }



	}
console.log(game.trys.length)



	function won(player){
		Object.keys(wins).forEach(function(item){

			if (player == 'player1') {
				var try1 = game.player1.indexOf(wins[item][0])
				var try2 = game.player1.indexOf(wins[item][1])
				var try3 = game.player1.indexOf(wins[item][2])

				if (try1 > -1 && try2 > -1 && try3 > -1){
					game.trys.push('GG');
					if (game.trys.length > 0) {
						document.write(player + ' venceu')
					}
				}else{
					game.trys = [];
				}
			}else{
				var try1 = game.player2.indexOf(wins[item][0])
				var try2 = game.player2.indexOf(wins[item][1])
				var try3 = game.player2.indexOf(wins[item][2])

				if (try1 > -1 && try2 > -1 && try3 > -1){
					game.trys.push('GG');
					if (game.trys.length > 0) {
						document.write(player + ' venceu')
					}
				}else{
					game.trys = [];
				}
			}


 	
 	});
	}


</script>

</html>